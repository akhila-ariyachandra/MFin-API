<!DOCTYPE html>

<html>

<head>
    <style>
        h1 {
            text-align: center;
        }

        table,
        th,
        td {
            border: 1px solid black;
        }

        table {
            width: 100%
        }

        .entity {
            width: 10%
        }

        .route {
            width: 15%
        }

        .type {
            width: 5%
        }

        .access {
            width: 15%
        }

        .description {
            width: 25%
        }

        .parameters {
            width: 30%
        }
    </style>
    <title>
        MFin API
    </title>
</head>

<body>
    <h1>MFin API Documentation</h1>

    <br>

    <h2>Authorization</h2>
    <p>
        The API uses JSON web tokens for authorization. Any route with the prefix
        <b>/api</b> is protected and will require a token to be accessed. New users can use the route
        <b>POST /authenticate</b> to get the token. The tokens are set to expire after 30 mins. The token can be passed in
        the header as
        <b>x-access-token</b> or as
        <b>token</b> in the query or body.
    </p>

    <br>

    <h2>Routes currently implemented</h2>

    <table>
        <tr>
            <th class="entity">Entity</th>
            <th class="route">Route</th>
            <th class="type">Type</th>
            <th class="access">Users Allowed</th>
            <th class="description">Description</th>
            <th class="parameters">Parameters</th>
        </tr>

        <!--Get an authorization token-->
        <tr>
            <td>Employee</td>
            <td>/user/authenticate</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Authenticate the user and get a token</td>
            <td>
                <ul>
                    <li>username (String)</li>
                    <li>password (String)</li>
                </ul>
            </td>
        </tr>

        <!--Renew authorization token-->
        <tr>
            <td>Employee</td>
            <td>/api/user/reauthenticate</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get new a token</td>
            <td>
                <ul>
                    <li>username (String)</li>
                    <li>pin (String)</li>
                </ul>
            </td>
        </tr>

        <!--Logout user-->
        <tr>
            <td>Employee</td>
            <td>/api/user/logout</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Logout the user</td>
            <td>
            </td>
        </tr>

        <!--Create new area-->
        <tr>
            <td>Area</td>
            <td>/api/area</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Create a new area</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>name (String)</li>
                    <li>postalCode (Number)</li>
                    <li>district (String)</li>
                </ul>
            </td>
        </tr>

        <!--Get the details of one area-->
        <tr>
            <td>Area</td>
            <td>/api/area/:areaID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of one area</td>
            <td>
                <ul>
                    <li>x-access-token[header] or token[query] (string)</li>
                    <li>areaID (Number)</li>
                </ul>
            </td>
        </tr>

        <!--Get the details of all areas-->
        <tr>
            <td>Area</td>
            <td>/api/area</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of all areas</td>
            <td>
                <ul>
                    <li>x-access-token[header] or token[query] (string)</li>
                </ul>
            </td>
        </tr>

        <!--Update area details-->
        <tr>
            <td>Area</td>
            <td>/api/area/:areaID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Update the area details</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>areaID (String)</li>
                    <li>name (String)</li>
                    <li>details (String)</li>
                </ul>
            </td>
        </tr>

        <!--Create new Customer-->
        <tr>
            <td>Customer</td>
            <td>/api/customer</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                </ul>
            </td>
            <td>Create a new customer</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>name (String)</li>
                    <li>surname (String)</li>
                    <li>nic (String)</li>
                    <li>address (String)</li>
                    <li>dob (Date) [MM-dd-YYYY]</li>
                    <li>phone (String)</li>
                    <li>email (String)</li>
                    <li>area (ObjectID)</li>
                    <li>longitude (String)</li>
                    <li>latitude (String)</li>
                </ul>
            </td>
        </tr>

        <!--Get one Customer's details-->
        <tr>
            <td>Customer</td>
            <td>/api/customer/:customerID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of one customer</td>
            <td>
                <ul>
                    <li>x-access-token[header] or token[query] (string)</li>
                    <li>customerID (Number)</li>
                </ul>
            </td>
        </tr>

        <!--Get all Customer details-->
        <tr>
            <td>Customer</td>
            <td>/api/customer</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of all customers</td>
            <td>
                <ul>
                    <li>x-access-token[header] or token[query] (string)</li>
                </ul>
            </td>
        </tr>

        <!--Update customer details-->
        <tr>
            <td>Customer</td>
            <td>/api/customer/:customerID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Update the details of the customer</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>customerID (Number)</li>
                    <li>name (String)</li>
                    <li>surname (String)</li>
                    <li>nic (String)</li>
                    <li>address (String)</li>
                    <li>dob (Date) [MM-dd-YYYY]</li>
                    <li>phone (String)</li>
                    <li>email (String)</li>
                    <li>area (ObjectID)</li>
                    <li>longitude (String)</li>
                    <li>latitude (String)</li>
                </ul>
            </td>
        </tr>

        <!--Create a new Employee-->
        <tr>
            <td>Employee</td>
            <td>/api/employee</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Create a new employee</td>
            <td>
                <ul>
                    <li>name (String)</li>
                    <li>surname (String)</li>
                    <li>nic (String)</li>
                    <li>address (String)</li>
                    <li>dob (Date) [MM-dd-YYYY]</li>
                    <li>
                        phone
                        <ul>
                            <li>work (String)</li>
                            <li>personal (String) (Optional)</li>
                        </ul>
                    </li>
                    <li>email (String)</li>
                    <li>username (String)</li>
                    <li>password (String)</li>
                    <li>pin (String)</li>
                    <li>
                        accountType (String) [admin/manager/receptionist/cashCollector]
                    </li>
                    <li>
                        meta
                        <ul>
                            <li>area (ObjectID) (Optional)</li>
                        </ul>
                    </li>
                </ul>
            </td>
        </tr>

        <!--Get details of one employee-->
        <tr>
            <td>Employee</td>
            <td>/api/employee/:employeeID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of one employee</td>
            <td>
                <ul>
                    <li>loanID (Number)</li>
                </ul>
            </td>
        </tr>

        <!--Get details of all employees-->
        <tr>
            <td>Employee</td>
            <td>/api/employee</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of all employees</td>
            <td>
            </td>
        </tr>

        <!--Update an Employee-->
        <tr>
            <td>Employee</td>
            <td>/api/employee/:employeeID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Create a new employee</td>
            <td>
                <ul>
                    <li>name (String)</li>
                    <li>surname (String)</li>
                    <li>nic (String)</li>
                    <li>address (String)</li>
                    <li>dob (Date) [MM-dd-YYYY]</li>
                    <li>
                        phone
                        <ul>
                            <li>work (String)</li>
                            <li>personal (String) (Optional)</li>
                        </ul>
                    </li>
                    <li>email (String)</li>
                    <li>username (String)</li>
                    <li>password (String)</li>
                    <li>pin (String)</li>
                    <li>
                        accountType (String) [admin/manager/receptionist/cashCollector]
                    </li>
                    <li>
                        meta
                        <ul>
                            <li>area (ObjectID) (Optional)</li>
                        </ul>
                    </li>
                </ul>
            </td>
        </tr>

        <!--Create new loan-->
        <tr>
            <td>Loan</td>
            <td>/api/loan</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                </ul>
            </td>
            <td>Create a new loan</td>
            <td>
                <ul>

                    <li>product (ObjectID)</li>
                    <li>date (Date) [MM-dd-YYYY]</li>
                    <li>loanAmount (Number)</li>
                    <li>duration (Number)</li>
                    <li>interest (Number)</li>
                    <li>customer (ObjectID)</li>
                </ul>
            </td>
        </tr>

        <!--Get details of one loan-->
        <tr>
            <td>Loan</td>
            <td>/api/loan/:loanID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of one loan</td>
            <td>
                <ul>
                    <li>x-access-token[header] or token[query] (string)</li>
                    <li>loanID (Number)</li>
                </ul>
            </td>
        </tr>

        <!--Get details of all loans-->
        <tr>
            <td>Loan</td>
            <td>/api/loan</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of all loans</td>
            <td>
                <ul>
                    <li>manager (Query) (Optional)</li>
                    <li>status (Query) (Optional)</li>
                    <li>customer (Query) (Optional)</li>
                    <li>product (Query) (Optional)</li>
                </ul>
            </td>
        </tr>

        <!--Update the details of loan-->
        <tr>
            <td>Loan</td>
            <td>/api/loan/:loanID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Update the details of a loan</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>loanID (Number)</li>
                    <li>product (ObjectID)</li>
                    <li>date (Date) [MM-dd-YYYY]</li>
                    <li>loanAmount (Number)</li>
                    <li>duration (Number)</li>
                    <li>interest (Number)</li>
                    <li>customer (ObjectID)</li>
                    <li>manager (String)</li>
                    <li>status (String)</li>
                </ul>
            </td>
        </tr>

        <!--Approve a loan-->
        <tr>
            <td>Loan</td>
            <td>/api/loan/:loanID/approve</td>
            <td>PATCH</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Approve a loan</td>
            <td>
                <ul>
                    <li>manager (String)</li>
                </ul>
            </td>
        </tr>

        <!--Reject a loan-->
        <tr>
            <td>Loan</td>
            <td>/api/loan/:loanID/reject</td>
            <td>PATCH</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Reject a loan</td>
            <td>
                <ul>
                    <li>manager (String)</li>
                </ul>
            </td>
        </tr>

        <!--Create a new Product-->
        <tr>
            <td>Product</td>
            <td>/api/product</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Create a product</td>
            <td>
                <ul>
                    <li>productName (String) [Required]</li>
                    <li>description (String) [Required]</li>
                    <li>minAmount (Number) [Required]</li>
                    <li>maxAmount (Number) [Required]</li>
                    <li>gracePeriod (Number) [Required]</li>
                    <li>interestRate (Number) [Required]</li>
                    <li>accruedInterest (Number) [Required]</li>
                    <li>approvedBy (ObjectId) [Required]</li>
                    <li>validFrom (Date) [Required]</li>
                    <li>validTo (Date) [Required]</li>
                </ul>
            </td>
        </tr>

        <!--Get details of all Products-->
        <tr>
            <td>Product</td>
            <td>/api/product</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get details of all products</td>
            <td></td>
        </tr>

        <!--Get details of one Product-->
        <tr>
            <td>Product</td>
            <td>/api/product/:productID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Receptionist</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get details of one product</td>
            <td></td>
        </tr>

        <!--Update a Product-->
        <tr>
            <td>Product</td>
            <td>/api/product/:productID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                </ul>
            </td>
            <td>Update a product</td>
            <td>
                <ul>
                    <li>productName (String) [Required]</li>
                    <li>description (String) [Required]</li>
                    <li>minAmount (Number) [Required]</li>
                    <li>maxAmount (Number) [Required]</li>
                    <li>gracePeriod (Number) [Required]</li>
                    <li>interestRate (Number) [Required]</li>
                    <li>accruedInterest (Number) [Required]</li>
                    <li>approvedBy (ObjectId) [Required]</li>
                    <li>validFrom (Date) [Required]</li>
                    <li>validTo (Date) [Required]</li>
                </ul>
            </td>
        </tr>

        <!--Create new Transaction-->
        <tr>
            <td>Transaction</td>
            <td>/api/transaction</td>
            <td>POST</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Create a new transaction</td>
            <td>
                <ul>
                    <li>token (String)</li>
                    <li>loan (ObjectID)</li>
                    <li>amount (Number)</li>
                    <li>cashCollector (ObjectID)</li>
                </ul>
            </td>
        </tr>

        <!--Get one Transaction's details-->
        <tr>
            <td>Transaction</td>
            <td>/api/transaction/:transactionID</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of one transaction</td>
            <td>
                <ul>
                    <li>transactionID (Number)</li>
                </ul>
            </td>
        </tr>

        <!--Get all Transaction details-->
        <tr>
            <td>transaction</td>
            <td>/api/transaction</td>
            <td>GET</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Get the details of all transactions</td>
            <td>
                <ul>
                </ul>
            </td>
        </tr>

        <!--Update Transaction details-->
        <tr>
            <td>Transaction</td>
            <td>/api/transaction/:transactionID</td>
            <td>PUT</td>
            <td>
                <ul>
                    <li>Admin</li>
                    <li>Manager</li>
                    <li>Cash Collector</li>
                </ul>
            </td>
            <td>Update the details of the transaction</td>
            <td>
                <ul>
                    <li>transactionID (Number)</li>
                    <li>loan (ObjectID)</li>
                    <li>date (Date) [MM-dd-YYYY]</li>
                    <li>amount (Number)</li>
                    <li>cashCollector (ObjectID)</li>
                    <li>status (String)</li>
                </ul>
            </td>
        </tr>
    </table>
</body>

</html>